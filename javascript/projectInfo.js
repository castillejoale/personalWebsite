//Add projects cells programatically

var projects = [];

var projectIXJournal = {
  id: "iXJournal",
  projectSession: "iOS",
  title: "iX Journal",
  imageSource: "url(images/apps/iXJournal.png)",
  projectText: "This is the second project app our students developed in the iOS course we taught at iXperience Cape Town, South Africa. Currently in the App Store.",
  projectTimes: "July '16",
  videoSource: "",
  projectLinks: [{link:"https://itunes.apple.com/us/app/ix-journal/id1134250801?mt=8", linktype:"appleStore"}]
};
projects.push(projectIXJournal);

var projectTicTacToe = {
  id: "iXoX",
  projectSession: "iOS",
  title: "Tic Tac Toe",
  imageSource: "url(images/apps/iXoX.png)",
  projectText: "This is the first project app our students developed in the iOS course we taught at iXperience Cape Town, South Africa. Currently in the App Store.",
  projectTimes: "June '16",
  videoSource: "",
  projectLinks: [{link:"https://itunes.apple.com/us/app/ix-ox/id1125351984?mt=8", linktype:"appleStore"}]
};
projects.push(projectTicTacToe);

var projectPio = {
  id: "pio",
  projectSession: "iOS",
  title: "PIO SMART RECORDER",
  imageSource: "url(images/apps/pio.png)",
  projectText: "We built Pio to help people record audio, mark important moments and export them, all in a simple interface. I was in charge of the iOS development.",
  projectTimes: "June '14 - present",
  videoSource: "videos/pio-video.mp4",
  projectLinks: [{link:"http://propelland.com/pio-smart-audio-recorder-app/", linktype:"web"},{link:"http://thenextweb.com/apps/2015/07/20/pio-for-ios-is-the-perfect-audio-recording-app-for-interviews/", linktype:"press"},{link:"https://itunes.apple.com/us/app/pio-smart-recorder/id923119916?ls=1&mt=8", linktype:"appleStore"}]
};
projects.push(projectPio);

var projectCalFit = {
  id: "calFit",
  projectSession: "iOS",
  title: "Fitness recommendation app",
  imageSource: "url(images/apps/calFitness.png)",
  projectText: "Along with professor Aswani and Mo Zhou, a phd student, we are working on an app that recommends workouts using machine learning algorithms.",
  projectTimes: "February '16 - present",
  videoSource: "",
  projectLinks: []
};
projects.push(projectCalFit);

var projectEasyDoesIt = {
  id: "easyDoesIt",
  projectSession: "iOS",
  title: "EASY DOES IT",
  imageSource: "url(images/apps/easyDoesIt.png)",
  projectText: "In 24 hours we designed and prototyped an iOS app that improves communications between users and the non-profit, as well as improving internal communications. We won Bekeley Builds Spring 16 - Easy Does It designathon.",
  projectTimes: "April '16",
  videoSource: "",
  projectLinks: [{link:"https://docs.google.com/presentation/d/1YoJWUQPQsoThpYJESuDRL511C2gJsaWl9Ggi8dpC3wk/edit", linktype:"presentation"}]
};
projects.push(projectEasyDoesIt);

var projectARTextbooks = {
  id: "ARTextbooks",
  projectSession: "iOS",
  title: "Augmented Reality Textbooks",
  imageSource: "url(images/apps/appNoImage.png)",
  projectText: "At the Berkeley Virtual Reality Club we are making textbooks more interactive by making conventional 2D figures come to life in 3D through Google Cardboard.",
  projectTimes: "January '16 - May '16",
  videoSource: "",
  projectLinks: [{link:"https://www.youtube.com/watch?v=EcAYZpuYi3w", linktype:"video"}]
};
projects.push(projectARTextbooks);

var projectAliviara = {
  id: "aliviara",
  projectSession: "iOS",
  title: "ALIVIARA SMART GLOVE",
  imageSource: "url(images/apps/aliviara.jpeg)",
  projectText: "In 48 hours we built a smart glove, app, and server prototype that help patients with Rheumatoid Arthritis conduct rehabilitation exercises based on collected data. We won Bekeley's Hack For Humanity 2016.",
  projectTimes: "February '16",
  videoSource: "",
  projectLinks: [{link:"https://docs.google.com/presentation/d/1MyB0A3yDUM2COJymWf7WJjGZthVq2QkIO_HR8Rqxk1k/edit", linktype:"presentation"}]
};
projects.push(projectAliviara);

var projectClock = {
  id: "clock",
  projectSession: "iOS",
  title: "PROPELLAND TIME!",
  imageSource: "url(images/apps/clock.png)",
  projectText: "Daniel Facio and I made an iOS app connected to an RFDuino that moved the propellers of a clock by blowing into the microphone of the phone.",
  projectTimes: "August '14",
  videoSource: "",
  projectLinks: [{link:"http://www.danielfacio.com/propelland-time.html", linktype:"web"}]
};
projects.push(projectClock);

var projectZumy = {
  id: "zumy",
  projectSession: "other",
  title: "ZUMY RESCUE ROBOTS",
  imageSource: "url(images/projects/project-zumy.png)",
  projectText: "We simulated a system where our Zumy Robots autonomously navigate a field with buildings and obstacles after a catastrophe, check for survivors, and if found signal another Zumy to arrive.",
  projectTimes: "August '15 - December '15",
  projectLinks: [{link:"https://www.youtube.com/watch?v=wWe99oHV6BY&feature=youtu.be", linktype:"presentation"}]
};
projects.push(projectZumy);

var projectInfiniteMirror = {
  id: "infiniteMirror",
  projectSession: "other",
  title: "INFINITE MIRROR",
  imageSource: "url(images/projects/project-infiniteMirror.png)",
  projectText: "Infinite mirror made with an Arduino, a full mirror, a half mirror, a 3D printed case, and a LED strip.",
  projectTimes: "August '14",
  projectLinks: [{link:"https://www.instagram.com/p/4AxpG8tjr_/", linktype:"instagram"}]
};
projects.push(projectInfiniteMirror);

var projectKa = {
  id: "ka",
  projectSession: "other",
  title: "NEW TEXTBOOK CONCEPT",
  imageSource: "url(images/projects/project-ka.png)",
  projectText: "Education is the root solution to todays major challenges. I proposed to Khan Academy to create a wikipedia like platform for textbooks that would reduce the cost of textbooks to zero.",
  projectTimes: "March '16",
  projectLinks: [{link:"https://docs.google.com/presentation/u/1/d/1wc829MPxy3WpouvfiPxrWt_6Gz1kgrX_Q_hgXaQBeAU/edit?usp=sharing", linktype:"presentation"}]
};
projects.push(projectKa);


var projectXamarin = {
  id: "xamarin",
  projectSession: "other",
  title: "CHURN ANALYSIS",
  imageSource: "url(images/projects/project-xamarin.png)",
  projectText: "A group of 5 future industrial engineers for our senior project we have partnered with Xamarin, a Microsoft acquired company, to forecast user churn rate.",
  projectTimes: "January '16 - May '16",
  projectLinks: [{link:"https://drive.google.com/file/d/0B3judopZrAtOMFREVDIwOHlZZnc/view", linktype:"pdf"}]
};
projects.push(projectXamarin);

var projectWeather = {
  id: "weather",
  projectSession: "iOS",
  title: "Wear based on weather",
  imageSource: "url(images/apps/weather.png)",
  projectText: "This is the first app I made in my life",
  projectTimes: "May '14",
  videoSource: "",
  projectLinks: []
};
projects.push(projectWeather);


for (i = 0; i < projects.length; i++) { 

  var projectDict = projects[i];
  var id = projectDict["id"]

  var divString = '';

  if (projectDict["projectSession"] == "iOS") {

    divString = divString.concat('<div class="cell" id="">');

      divString = divString.concat('<div class="cellContent cellContentApp">');

        divString = divString.concat('<video loop preload="none"><source src="" type="video/mp4">Your browser does not support the video tag.</source></video>');

        divString = divString.concat('<div class="dynamic">');
          divString = divString.concat('<div class="dynamic-textContainer">');
            divString = divString.concat('<div class="dynamic-text dynamic-textApp"></div>');
          divString = divString.concat('</div>');
          divString = divString.concat('<div class="dynamic-timesContainer">');
            divString = divString.concat('<div class="dynamic-times dynamic-timesApp"></div>');
          divString = divString.concat('</div>');
        divString = divString.concat('</div>');

      divString = divString.concat('</div>');

      divString = divString.concat('<div class="cellView">');

        divString = divString.concat('<div class="projectTitle"></div>');

        divString = divString.concat('<div class="list" id="listProject">');

        for(var j = 0; j < projectDict["projectLinks"].length; j++){
          divString = divString.concat('<a target="_blank" href="">');
            divString = divString.concat('<div class="listElement listElementProject" id=""></div>');
          divString = divString.concat('</a>');
        }

          divString = divString.concat('<div class="listElement listElementProject text" id=""></div>');

        divString = divString.concat('</div>');

      divString = divString.concat('</div>');

    divString = divString.concat('</div>');

    var div = $(divString);
    $(".app").append(div);

    
    div.first().attr('id', id);
    $('#'.concat(id).concat(' .cellContent')).css( "background-image", projectDict["imageSource"] );
    $('#'.concat(id).concat(' .cellContentApp video source')).attr('src', projectDict["videoSource"]);
    $('#'.concat(id).concat(' .cellView .projectTitle')).text(projectDict["title"]);

    $('#'.concat(id).concat(' .cellContent .dynamic .dynamic-textContainer .dynamic-text')).text( projectDict["projectText"] );
    $('#'.concat(id).concat(' .cellContent .dynamic .dynamic-timesContainer .dynamic-times')).text( projectDict["projectTimes"] );

    for(var j = 0; j < projectDict["projectLinks"].length; j++){

      var element = $('#'.concat(id).concat(' .cellView #listProject .listElement')).eq(j);
      var classes = element.attr('class');
      element.attr('class', classes.concat(" ".concat(projectDict["projectLinks"][j]["linktype"])));
      
      $('#'.concat(id).concat(' .cellView #listProject')).children().eq(j).attr('href', projectDict["projectLinks"][j]["link"]);

    }

  } else if (projectDict["projectSession"] == "other") {

    divString = divString.concat('<div class="cell" id="">');
      divString = divString.concat('<div class="cellContent cellContentProject">');
        divString = divString.concat('<div class="dynamic">');
          divString = divString.concat('<div class="dynamic-textContainer">');
            divString = divString.concat('<div class="dynamic-text dynamic-textProject"></div>');
          divString = divString.concat('</div>');
          divString = divString.concat('<div class="dynamic-timesContainer">');
            divString = divString.concat('<div class="dynamic-times dynamic-timesProject"></div>');
          divString = divString.concat('</div>');
        divString = divString.concat('</div>');
      divString = divString.concat('</div>');
      divString = divString.concat('<div class="cellView">');
        divString = divString.concat('<div class="projectTitle"></div>');
        divString = divString.concat('<div class="list" id="listProject">');
        for(var j = 0; j < projectDict["projectLinks"].length; j++){
          divString = divString.concat('<a target="_blank" href="">');
            divString = divString.concat('<div class="listElement listElementProject" id=""></div>');
          divString = divString.concat('</a>');
        }
        divString = divString.concat('<div class="listElement listElementProject text" id=""></div>');
        divString = divString.concat('</div>');
      divString = divString.concat('</div>');
    divString = divString.concat('</div>');

    var div = $(divString);
    $("#done").append(div);

    div.attr('id', id);
    $('#'.concat(id).concat(' .cellContent')).css( "background-image", projectDict["imageSource"] );
    $('#'.concat(id).concat(' .cellContent .dynamic .dynamic-textContainer .dynamic-text')).text( projectDict["projectText"] );
    $('#'.concat(id).concat(' .cellContent .dynamic .dynamic-timesContainer .dynamic-times')).text( projectDict["projectTimes"] );
    $('#'.concat(id).concat(' .cellView .projectTitle')).text(projectDict["title"]);

    for(var j = 0; j < projectDict["projectLinks"].length; j++){
      // $('#'.concat(id).concat(' .cellView #listProject .listElement')).eq(j).attr('id', projectDict["projectLinks"][j]["linktype"]); 

      var element = $('#'.concat(id).concat(' .cellView #listProject .listElement')).eq(j);
      var classes = element.attr('class');
      element.attr('class', classes.concat(" ".concat(projectDict["projectLinks"][j]["linktype"])));

      $('#'.concat(id).concat(' .cellView #listProject')).children().eq(j).attr('href', projectDict["projectLinks"][j]["link"]);
    }

  }

}

// function handleHoverOfCellContentProject(ev) { 

//   console.log ( 'handleHoverOfCellContentProject' ); 

// 	var target = $(ev.target);
// 	//Get id (project)
// 	var elId = target.attr('id');  
// 	console.log ( 'Target: '+ target.attr('class') );  
// 	console.log ( 'The mouse is hovering: '+ elId );   

// 	//Show dynamic class
// 	$(target).children().fadeIn(200);

// 	//Disactivate full page scrolling
// 	$('html').css({overflow: 'hidden'});

// };

// function handleLeaveOfDynamic() {

//   console.log ( 'handleLeaveOfDynamic' ); 

// 	// var target = $(ev.target);
// 	// //Get id (project)
// 	// var elId = target.attr('id');
// 	// console.log ( 'Target: '+ target.attr('class') );  
// 	// console.log ( 'The mouse is not hovering: '+ elId );   
// 	// console.log ( '1No Hover' ); 

// 	//Hide dynamic class
// 	if ($(".dynamic").is(":visible")){
// 	    $(".dynamic").fadeOut(200);
// 	}

// 	//Activate full page scrolling
// 	$('html').css({overflow: 'scroll'});

// };


// $(".cellContentProject").mouseover(handleHoverOfCellContentProject);
// $(".dynamic").mouseleave(handleLeaveOfDynamic);



function handleHoverOfText(ev) { 

  console.log ( 'handleHoverOfText' ); 

  var target = $(ev.target).parent().parent().parent().children().eq(0);

  // var elId = target.attr('id');  
  // console.log ( 'Target: '+ target.attr('class') );  
  // console.log ( 'The mouse is hovering: '+ elId ); 
  // console.log("hey")  

  //Show dynamic class
  $(target).children().fadeIn(200);

  // //Disactivate full page scrolling
  // $('html').css({overflow: 'hidden'});
};

function handleLeaveOfText(ev) {

  console.log ( 'handleLeaveOfText' ); 

  var target = $(ev.target).parent().parent().parent().children().find(".dynamic");
  console.log ( 'Target: '+ target.attr('class') );
  // //Hide dynamic class
  if (target.is(":visible")){
      target.fadeOut(200);
  }

};


$(".text").mouseover(handleHoverOfText);
$(".text").mouseleave(handleLeaveOfText);

$(function(){
    var mouseY = 0;
    var topValue = 0;
    window.addEventListener("mouseout",function(e){
        mouseY = e.clientY;
        if(mouseY<topValue) {
        	handleLeaveOfDynamic();
        }
    },
    false);
});

//Make all the project info dissapear first
var dynamic = document.getElementsByClassName("dynamic");
for(var i = 0; i < dynamic.length; i++)
{
   $(dynamic.item(i)).fadeOut(0);
}

// //Set text of "view" buttons
// $( ".cellView" ).text( "VIEW" );


// function handleClick(ev) {

//   console.log ( 'handleClick' ); 

// };

// $("body").mouseclick(handleClick);
